{% extends "app.html" %}
{% load formatfilters %}
{% block main_body %}
<div class="row">
  <div class="col-md-12 col-lg-12 col-xs-12 col-sm-12">
    <div class="row">
      <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12">Invoice Number</div>
      <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12" style="text-align: right">{{ invoice.number }}</div>
      <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12">Dated</div>
      <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12" style="text-align: right">{{ invoice.dated }}</div>
    </div>
    <div class="row">
      <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12">Amount</div>
      <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12" style="text-align: right">{{ invoice.amount | currency}}</div>
      <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12">Balance Due</div>
      <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12" style="text-align: right">{{ invoice.balance_due | currency }}</div>
    </div>
    {% if invoice.invoiceitem_set is not None %}
    <div class="row">
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <table class="table table-condensed">
          <caption>Itemized Items</caption>
          <thead>
            <th scope="col">Item</th>
            <th scope="col" style="text-align: center">Price</th>
            <th scope="col" style="text-align: center">Quantity</th>
            <th scope="col" style="text-align: right">Total</th>
          </thead>
          <tbody>
            {% for invItem in invoice.invoiceitem_set.all %}
              <tr>
                <td>
                  {{ invItem.title }}
                  <br>
                  {{ invItem.description|default:"" }}
                </td>
                <td style="text-align: center">
                  {{ invItem.cost_per_unit | currency }}
                </td>
                <td style="text-align: center">
                  {{ invItem.units }}
                </td>
                <td style="text-align:right">
                  {{ invItem.total | currency }}
                </td>
              </tr>
              {% if invItem.invoiceitemcredit_set is not None %}
                {% for itc in invItem.invoiceitemcredit_set.all %}
                  <tr>
                    <td style="text-align: right" colspan="3">
                      {{ itc.description }}
                    </td>
                    <td style="text-align:right">
                      {{ itc.amount|multiply:-1|currency  }}
                    </td>
                  </tr>
                {% endfor %}
              {% endif %}
            {% endfor %}
          </tbody>
          <tfoot>
            <tr>
              <th scope="row" colspan="3" style="text-align: right">Total</th>
              <td style="text-align: right">{{invoice.amount | currency}}</td>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}
